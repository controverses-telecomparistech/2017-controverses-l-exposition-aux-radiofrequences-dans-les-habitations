(function($,window,document,FTVi){("undefined"===typeof FTVi.Content)&&(FTVi.Content={});FTVi.Content.multiScreen={oldIdx:null,toggle:function(idx){idx=parseInt(idx);if(idx!=FTVi.Content.multiScreen.oldIdx){$('.multiScreenBtn_'+FTVi.Content.multiScreen.oldIdx).removeClass('on');$('.multiScreenBtn_'+FTVi.Content.multiScreen.oldIdx).addClass('off');$('.multiScreenBtn_'+idx).addClass('on');FTVi.Content.multiScreen.oldIdx=idx;}}};FTVi.Content.loadArticle=contentLoadBasicElements;FTVi.Content.loadAudio=contentLoadBasicElements;FTVi.Content.loadVideo=contentLoadBasicElements;FTVi.Content.loadPoll=contentLoadBasicElements;FTVi.Content.loadVotableList=contentLoadBasicElements;FTVi.Content.loadQuiz=contentLoadBasicElements;FTVi.Content.loadSlideshow=contentLoadSlideshow;FTVi.Content.loadDirectTv=contentLoadDirectTv;FTVi.Content.loadLive=contentLoadLive;FTVi.Content.loadLongread=contentLoadLongread;$(document).ready(function(){if(0==$('.miniHeader').length){if("undefined"!=typeof FTVi.Content&&FTVi.Content.type!='direct_tv'&&FTVi.Content.type!='second_screen'&&$('#hot-contents').length===0){FTVi.Html.loadBlockHotContents();}}
var links=document.getElementsByTagName("link");for(var i=0;i<links.length;i++){if(links[i].getAttribute("rel")==="canonical"){FTVi.Content.url=links[i].getAttribute("href");}}
$("#col-middle.text p a").each(function(){$(this).click(function(){FTVi.countClick('link-in-content'+((FTVi.Content&&FTVi.Content.type)?'::'+FTVi.Content.type:'::external-link')+'::'+$(this).attr("href"));});});if(FTVi.Content.type!=='longread'){var $document=$(document);$document.scroll(function(){if($document.scrollTop()>=600){if(0==$('#backToTop').length){$('body').append('<div id="backToTop"></div>');var scrollDuring=1000;var scrollBegin=10;if(document.getElementById('backToTop')){$('#backToTop').click(function(){FTVi.countClick('back-to-top');var $targetid=$('#article');if($targetid.length){var targetOffset=$targetid.offset().top-scrollBegin;$('html,body').animate({scrollTop:targetOffset},scrollDuring);return false;}});}}
$('#backToTop').fadeIn();}else{$('#backToTop').fadeOut();}});}});document.dispatchEvent(new CustomEvent('FTVi::Content::ready',{bubbles:true}));function contentLoadBasicElements(){contentOutbrain();contentLoadColLeft();contentLoadColMiddle();}
function contentLoadSlideshow(){contentOutbrain();FTVi.Social.generateShareBox('.slideshow-head .article-info');$.ajax({url:'/esi/www/content/home-content',async:true,cache:true,success:function(data){$('.container > article > .col-left').append(data);}});contentLoadColMiddle();}
function contentLoadDirectTv(flags){if(FTVi.Content.type!='second_screen'){contentOutbrain();}
contentLoadColLeft();contentLoadColMiddle();}
function contentLoadLive(){contentOutbrain();contentLoadColLeft({newsletter:{hide:true}});contentLoadColMiddle();}
function contentLoadLongread(){FTVi.Social.generateShareBox('header[role=navigation] .logo');}
function contentOutbrain(){if($('.a-lire-aussi').length>0){window.onAreaVisible($('.a-lire-aussi'),function(){var code_html='';code_html+='<div class="OUTBRAIN" data-src="'+FTVi.Content.url+'" data-widget-id="AR_3" data-ob-template="francetvinfo"></div>';$('#col-middle').append(code_html);var textHeight=$('#col-middle.text').height();if(textHeight>3000){var marginTop=textHeight-$('.col-right').height()-1104;marginTop=(marginTop<0?0:marginTop);code_html='';code_html+='<div style="margin-top:'+marginTop+'px" class="OUTBRAIN" data-src="'+FTVi.Content.url+'" data-widget-id="SB_1" data-ob-template="francetvinfo"></div>';$('.container .col-right').append(code_html);}
FTVi.lazyLoadLight(['http://widgets.outbrain.com/outbrain.js'],function(){});},500);}}
function contentLoadDisqus(){var disqus_config=function(){var profile=JSON.parse(unescape(FTVi.Tools.cookie.readCookie('profile')));this.page.remote_auth_s3=profile.disqusHmac;this.page.api_key=FTVi.Conf.reactions.publicKey;this.callbacks.onNewComment=[function(){FTVi.post.postCallback();}];};(function(){var s;s=document.createElement('script');s.type='text/javascript';s.async=true;s.src='http://'+FTVi.Conf.reactions.applicationDisqus+'.disqus.com/embed.js';(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(s);s=document.createElement('script');s.type='text/javascript';s.async=true;s.src='http://'+FTVi.Conf.reactions.applicationDisqus+'.disqus.com/count.js';(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(s);})();}
function isElectionOrPolitique(){return FTVi.Content.topics.toLowerCase().indexOf('election')!==-1||FTVi.Content.topics.toLowerCase().indexOf('politique')!==-1;}
function contentLoadALireAussi(){var xitiTag=null,where=null;if(isElectionOrPolitique()){xitiTag='a-lire-aussi-elections-politique::';where='before';}else{xitiTag='a-lire-aussi-elections-horspolitique::';where='after';}
$.when($.ajax({url:'/esi/www/content/a-lire-aussi-election',async:true,cache:true,success:function(data){}})).done(function(block){var block=$(block);block.find('.link').on('click',function(event){FTVi.countClick(xitiTag+FTVi.Tools.getSlugfromHref(document.location.href)+'::'+FTVi.Tools.getSlugfromHref(event.target.href));});block.find('.newsletter').on('click',function(event){FTVi.countClick(xitiTag+'newsletter');});if(where==='before'){$(block).insertBefore($('.form-alert-mktg.responsive')||$('aside.tags'));}else{$(block).insertAfter($('.form-alert-mktg.responsive')||$('aside.tags'));}});}
function contentLoadColLeft(opts){opts=$.extend(true,{share:{targetElement:'article .col-left > .publish-date'},newsletter:{targetElement:'article > .tags',where:'bottom'},homeContent:{targetElement:'article'}},opts);window.onAreaVisible($('article .publish-date'),function(){if(!opts.newsletter.hide)FTVi.Newsletter.displayNewsletterBox('article .col-left > .publish-date','left');if(!opts.share.hide)FTVi.Social.generateShareBox(opts.share.targetElement);$.ajax({url:'/esi/www/content/home-content',async:true,cache:true,success:function(data){$(data).insertAfter($('.container > article > .col-left .newsletter'));}});if($('.container > article').height()>2800){$.ajax({url:'/esi/www/content/home-box-tag',async:true,cache:true,success:function(data){$('.container > article > .col-left').append(data);}});}},0);}
function contentLoadColMiddle(opts){opts=$.extend(true,{newsletter:{targetElement:'#col-middle',where:'bottom'},share:{targetElement:'#col-middle'},comments:{targetElement:'#col-middle'}},opts);if(_.getPath(FTVi,'Content.topics')&&_.getPath(FTVi,'Content.topics').toLowerCase().indexOf('politique')!==-1){opts.newsletter.where='bottom-election';}
if($('aside.tags').length>0){window.onAreaVisible($('aside.tags'),function(){contentLoadALireAussi();FTVi.Social.generateShareBox(opts.share.targetElement,'append');FTVi.Newsletter.displayNewsletterBox(opts.newsletter.targetElement,opts.newsletter.where,'append');$.when($.ajax({url:'/esi/www/content/reactions',async:true,cache:true,success:function(data){}})).done(function(blockReactions){$(opts.comments.targetElement).append(blockReactions);contentLoadDisqus();});},600);}}})(jQuery,window,document,FTVi);