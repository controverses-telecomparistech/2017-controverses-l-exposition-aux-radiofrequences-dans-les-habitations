window.log=function(){log.history=log.history||[];log.history.push(arguments);if(this.console){arguments.callee=arguments.callee.caller;var a=[].slice.call(arguments);(typeof console.log==="object"?log.apply.call(console.log,console,a):console.log.apply(console,a))}};
(function(b){for(var d="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,timeStamp,profile,profileEnd,time,timeEnd,trace,warn".split(","),a;a=d.pop();){if(b[a]){b[a]=b[a]}else{b[a]=function(){}}}})((function(){try{return window.console;}catch(err){return window.console={};}})());!function(){var detect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(t){for(var e=0;e<t.length;e++){var n=t[e].string,i=t[e].prop;if(this.versionSearchString=t[e].versionSearch||t[e].identity,n){if(-1!=n.indexOf(t[e].subString))return t[e].identity}else if(i)return t[e].identity}},searchVersion:function(t){var e=t.indexOf(this.versionSearchString);if(-1!=e)return parseFloat(t.substring(e+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};document.head=document.head||document.getElementsByTagName("head")[0];var settings={debug:!0,base_url:location.protocol+"//"+location.hostname+"/",api_url:null,sso_url:null,provider_url:null,fb_key:null};this.Cad={__DOMEvents:{},__DOMShortcuts:{hasClass:function(t){return this.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass:function(t){this.hasClass(t)||(this.className+=" "+t)},removeClass:function(t){if(this.hasClass(t)){var e=new RegExp("(\\s|^)"+t+"(\\s|$)");this.className=this.className.replace(e," ")}},event:function(type,callback){var event_callback=function(t){for(p in Cad.__DOMEvents[type][this])"function"==typeof Cad.__DOMEvents[type][this][p]&&Cad.__DOMEvents[type][this][p](t)};void 0==Cad.__DOMEvents[type]&&(Cad.__DOMEvents[type]={}),void 0==Cad.__DOMEvents[type][this]&&(Cad.__DOMEvents[type][this]=[]),Cad.__DOMEvents[type][this].push(callback),eval("this.on"+type+" = event_callback;")},eventdel:function(t,e){if(void 0!=Cad.__DOMEvents[t]&&void 0!=Cad.__DOMEvents[t][this])for(p in Cad.__DOMEvents[t][this])Cad.__DOMEvents[t][this][p]==e&&(Cad.__DOMEvents[t][this][p]=void 0)},eventsdel:function(t){void 0!=Cad.__DOMEvents[t]&&void 0!=Cad.__DOMEvents[t][this]&&(Cad.__DOMEvents[t][this]=void 0)},append:function(t){this.appendChild(t)},prepend:function(t){this.insertBefore(t,this.firstChild)},remove:function(){this.parentNode.removeChild(this)}},init:function(t){t&&(settings=this.merge(settings,t,!0)),this.log(settings),detect.init(),this.log(detect)},get:function(t){return void 0!=t?settings[t]:settings},merge:function(t,e,n){for(var i in e)(n||void 0===t[i])&&(t[i]=e[i]);return t},switch_blur:function(t,e){var n=$(t);n.removeEvents("focus").removeEvents("blur").addEvents({focus:function(){Cad.Refresh&&Cad.Refresh.stop(),n.value==e&&(n.value="")},blur:function(){""==n.value&&(n.value=e)}})},alert:function(t,e,n){void 0==n&&(n=!0),SqueezeBox?SqueezeBox.open(t,{handler:"string",closable:n,closeBtn:n,onClose:e,size:{x:null,y:null}}):alert(t)},$:function(t){if("string"==typeof t&&(t=document.getElementById(t)),void 0!=t)for(var e in Cad.__DOMShortcuts)"undefined"==typeof t[e]&&(t[e]=Cad.__DOMShortcuts[e]);return t},$$:function(t,e){var n={"#":"getElementById",".":"getElementsByClassName","@":"getElementsByName","=":"getElementsByTagName","*":"querySelectorAll"},i=/[=#@.*]/.exec(t)[0];return(e||document)[n[i]](t.split(i)[1])},id:function(t){return this.$(t)},create:function(t,e,n){var i=document.createElement(t);if(void 0!=e)for(p in e)"html"==p?i.innerHTML=e[p]:"string"==typeof p&&i.setAttribute(p,e[p]);return void 0!=n&&this.$(n).append(i),Cad.log("Cad.create - Appel : "+t),i},ajax:function(t){var e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n={then:[],error:[],always:[]};return e.call=function(t,i){for(var r=0;r<n[t].length;r++)"function"==typeof n[t][r]&&n[t][r].call(e,i)},e.onreadystatechange=function(){4===this.readyState&&(this.call("always"),200==this.status?this.call("then",this.responseText):this.call("error","unknow"))},e.open("GET",t,!0),e.setRequestHeader("Accept","text/html"),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.send(null),{always:function(t){return n.always.push(t),this},then:function(t){return n.then.push(t),this},failed:function(t){return n.error.push(t),this}}},log:function(t){1==Cad.get("debug")&&"undefined"!=typeof console&&console.log(t)},error:function(t){void 0!=console&&console.error(t)}},Cad.callerOf=function(t){return t.call.bind(t)},Cad.bind=Cad.callerOf(Function.bind),Cad.forEach=Cad.callerOf([].forEach),this.Cad.Iframe={create:function(t){var e=Cad.id(t);if(!e){var n="display:none;border:0;padding:0;margin:0;";Cad.create("div",{html:'<iframe style="'+n+'" frameborder="0" scrolling="no"  name="'+t+'" id="'+t+'"></iframe>'},document.body),e=Cad.id(t),Cad.log("Cad.Iframe - Appel .create : "+t)}return e},window:function(t){var e=Cad.id(t);return void 0==e?null:e.contentWindow||e},document:function(t){var e=Cad.id(t);return void 0==e?null:e.contentDocument||e.contentWindow.document}}}();;

!function(){var n=null,t=!1,c=[],a=[];Cad.Action={__callback:null,init:function(){t===!1&&(t=!0,window.setInterval(function(){if(!Cad.Action.listening()&&c.length>0){var n=c.shift();void 0!=n&&Cad.Action.call(n.uri,n.callback)}},100))},listening:function(){return null!=n},listen:function(t){n=window.setInterval(function(){if(null!=Cad.Action.__callback){window.clearInterval(n),n=null;var c=Cad.Action.__callback;Cad.Action.__callback=null,"function"==typeof t&&t(c)}},100)},enqueu:function(n,t){n&&c.push({uri:n,callback:t})},action:function(n,t,c,a){var i=Cad.get("api_url")+n+"?"+t;1==a&&this.clear(i),Cad.Action.enqueu(i,c)},clear:function(n){if("*"==n)a=[];else{for(var t=[],c=0,i=a.length;i>c;c++)a[c].uri!=n&&t.push(a[c]);a=t}},call:function(n,t){Cad.log("Cad.Action - Appel .call : `"+n+"`");for(var c=0,i=a.length;i>c;c++)if(a[c].uri==n)return"function"==typeof t&&t(a[c].content),void Cad.log("Cad.Action - Fin .call (from cache) : `"+n+"`");var l=new Date,o=Cad.create("script",{async:"true",src:n+(n.match(/\?/g)?"&":"?")+"t="+l.getTime()},document.head);Cad.Action.listen(function(c){a.push({uri:n,callback:t,content:c}),Cad.log("Cad.Action - Fin .call : `"+n+"`"),"function"==typeof t&&t(c),Cad.$(o).remove()})}}}();;

!function(){Cad.log(location.host.split(".").slice(-2).join("."));var o=null,e="__ucadcook",n="."+location.host.split(".").slice(-2).join(".");this.Cad.Sso={clear:function(){o=null},getcookie:function(){var o=GetCookie(e);return o?o:null},setcookie:function(o){var t=null;null==this.getcookie()&&null!=o&&SetCookie(e,o,t,"/",n)},rmcookie:function(){RemoveCookie(e,"/",n)},data:function(e,n){if(1==n&&this.clear(),null==o){var t=this.getcookie();if(null!=t)Cad.Action.action("userdata","token="+encodeURIComponent(t),function(n){"undefined"!=typeof e&&e(n),1==n.error?(Cad.Sso.rmcookie(),o=null):Cad.Sso.setcookie(n.token)},n);else{var i=Cad.get("sso_url")+"login.php?";i+="ok="+encodeURIComponent(Cad.get("api_url")+"userdata"),i+="&ko="+encodeURIComponent(Cad.get("api_url")+"userdata"),1==n&&Cad.Action.clear(i),Cad.Action.enqueu(i,function(n){"undefined"!=typeof e&&e(n),1!=n.error&&(o=n,Cad.Sso.setcookie(n.token))})}}else"undefined"!=typeof e&&e(o)},logout:function(o){var e=Cad.get("sso_url")+"logout.php?";e+="ok="+encodeURIComponent(Cad.get("api_url")+"logout"),e+="&ko="+encodeURIComponent(Cad.get("api_url")+"logout?er=2"),Cad.Action.enqueu(e,function(e){"undefined"!=typeof o&&o(e),Cad.Sso.rmcookie()})},login:function(o,e,n){var t=Cad.get("sso_url")+"login.php?user="+encodeURIComponent(o)+"&passwd="+encodeURIComponent(e);t+="&ok="+encodeURIComponent(Cad.get("api_url")+"login?er=-1"),t+="&ko="+encodeURIComponent(Cad.get("api_url")+"login?er=1"),Cad.Action.enqueu(t,function(o){0!=o.token&&Cad.Sso.setcookie(o.token),"undefined"!=typeof n&&n(o)});var i=Cad.Iframe.create("cad-user-login");i.src=t}}}();;

!function(e){var o={google:[870,540],yahoo:[500,530],facebook:[550,300],twitter:[770,400],linkedin:[550,480],abonnes:[550,400]},n='<a href="#signin" class="spr-leplus signin" onclick="return Cad.Socialize.connect(\'leplus\');" title="Je me connecte"><span>Je me connecte</span><span class="h span">Pour réagir, je me connecte</span><span class="triangle"></span></a><a href="#inscript" class="spr-leplus signup" onclick="return Cad.Socialize.inscript(\'leplus\');" title="Je n\'ai pas de compte je m\'inscris"><span class="span">Je m\'inscris</span></a>',t=null,i=e.Socialize={callback:null,prov:null,prov_key:null,abo:null,cookie_name:"__ucadinvit",getUrl:function(){return e.get("provider_url")},getConnectUrl:function(){return e.get("connect_url")},clear:function(){null!=t&&(window.clearInterval(t),t=null)},save:function(){var e=new Date;e.setYear(e.getYear()+1920),SetCookie(this.cookie_name,JSON.encode({prov_key:i.prov_key,abo:i.abo}),e,"/")},load:function(){var o=GetCookie(this.cookie_name);if(o)try{o=JSON.decode(o),i.prov_key=i.prov_key?i.prov_key:o.prov_key,i.abo=i.abo?i.abo:o.abo}catch(n){e.log("cookie socialize vide")}},unload:function(){RemoveCookie(this.cookie_name,"/")},insertFields:function(e,o){var t=$(e),i=o.login_fields||n;t.set("html",i)},inscript:function(o){this.load();var n=(screen.width-685)/2,a=(screen.height-864)/2,l=this.getUrl()+"update/?light=1&ud[provider]="+o+"&prov="+encodeURIComponent(this.prov)+"&prov_key="+encodeURIComponent(this.prov_key)+"&abo="+encodeURIComponent(this.abo),c=window.open(l,null,"dependent=yes,width=685,height=864,toolbar=0,resizable=1,left="+n+",top="+a);return c.focus(),this.clear(),t=window.setInterval(function(){(!c||c.closed)&&(e.log("Cad.Socialize .clear : fermeture de la popup d'inscription"),i.clear(),e.Sso.data(function(o){"function"==typeof e.Socialize.callback?e.Socialize.callback(o):0!=o&&window.parent.location.reload()},!0))},100),!1},link:function(n){var a=o[n][0],l=o[n][1],c=(screen.width-a)/2,r=(screen.height-l)/2,s=window.open(this.getUrl()+"link/?token="+e.Sso.getcookie()+"&provider="+n,null,"dependent=yes,width="+a+",height="+l+",toolbar=0,resizable=1,left="+c+",top="+r);return s.focus(),this.clear(),t=window.setInterval(function(){(!s||s.closed)&&(e.log("Cad.Socialize .clear : fermeture de la popup"),i.clear(),e.Sso.data(function(e){"function"==typeof i.callback?i.callback(e):0!=e&&window.location.reload()},!0))},100),!1},connect:function(o,n){this.load();var a=(screen.width-700)/2,l=(screen.height-473)/2,c=this.getConnectUrl()+"?light=1&provider="+o+"&prov="+encodeURIComponent(this.prov)+"&prov_key="+encodeURIComponent(this.prov_key)+"&abo="+encodeURIComponent(this.abo);if(n===!0)return c;var r=window.open(c,null,"dependent=yes,width=700,height=473,toolbar=0,resizable=1,left="+a+",top="+l);return r.focus(),this.clear(),t=window.setInterval(function(){(!r||r.closed)&&(e.log("Cad.Socialize .clear : fermeture de la popup connexion"),i.clear(),e.Sso.data(function(o){"function"==typeof e.Socialize.callback?e.Socialize.callback(o):0!=o&&window.parent.location.reload()},!0))},100),!1},open:function(n){this.load();var a=o[n][0],l=o[n][1],c=(screen.width-a)/2,r=(screen.height-l)/2,s=window.open(this.getUrl()+"?provider="+n+"&prov="+encodeURIComponent(this.prov)+"&prov_key="+encodeURIComponent(this.prov_key)+"&abo="+encodeURIComponent(this.abo),null,"dependent=yes,width="+a+",height="+l+",toolbar=0,resizable=1,left="+c+",top="+r);s.focus(),this.clear(),t=window.setInterval(function(){(!s||s.closed)&&(e.log("Cad.Socialize .clear : Fermeture de la popup"),i.clear(),e.Sso.data(function(e){"function"==typeof i.callback?i.callback(e):0!=e&&window.parent.location.reload()},!0))},100)},google:function(){return this.open("google"),!1},yahoo:function(){return this.open("yahoo"),!1},facebook:function(){return this.open("facebook"),!1},twitter:function(){return this.open("twitter"),!1},linkedin:function(){return this.open("linkedin"),!1},abonnes:function(){return this.open("abonnes"),!1}}}(Cad);;

!function(Cad){Cad.Paginate=new Class({Implements:Options,options:{append:!1,pagin_url:null,current_page:0,start_page:1,max_page:0,param:"p",revealSelector:"article",bt_next:null,request:null,callback:null},last_elt:null,gopt:{wait:!1,callback:null},initialize:function(element,options){this.setOptions(options);var _inst=this,settings=_inst.options,$el=$(element),$next=$(settings.bt_next);_inst.options.current_page=_inst.options.start_page,void 0!=$el&&(settings.request=function(url){$next&&$next.addClass("spinner"),Cad.ajax(url).always(function(){$next&&$next.removeClass("spinner")}).then(function(result){1==settings.append&&($el.innerHTML=""),Cad.forEach(Cad.create("div",{html:result}).childNodes,function(elt){Node.ELEMENT_NODE==elt.nodeType&&(Cad.$($el).append(elt),Cad.forEach(Cad.$$("=script",elt),function(script){try{eval(script.innerHTML)}catch(e){Cad.log(e)}}))}),settings.current_page++,Cad.log("page suivante récupérée : "+settings.current_page);var last_elt=$el.getLast(_inst.options.revealSelector);_inst.last_elt=last_elt,_inst.gopt.wait==settings.current_page?(_inst.gopt.wait=!1,"function"==typeof _inst.gopt.callback&&_inst.gopt.callback(last_elt),_inst.gopt.callback=null):_inst.gopt.wait!==!1&&_inst.next(),"function"==typeof settings.callback&&settings.callback(last_elt),void 0!=$next&&(1==settings.max_page||1!=settings.current_page)&&settings.current_page>=settings.max_page&&$next.hide()})}),void 0!=$next&&$next.addEvent("click",function(){return _inst.next(),!1})},go:function(t,e){var n=this.options;t==n.current_page?"function"==typeof e&&e(this.last_elt):(this.gopt.wait=t,"function"==typeof e&&(this.gopt.callback=e))},next:function(){var t=this.options;Cad.log("entre page suivante : "),Cad.log(t),t.current_page<t.max_page&&t.request(t.pagin_url+"&"+t.param+"="+t.current_page)}})}(Cad);;

!function(e){e.Reagir=new Class({Implements:Options,options:{connect_zone:null,noconnect_zone:null},_validator:null,_form:null,_sending:!1,initialize:function(n,t){if(!$(n))return void e.log("Le formulaire de réaction n'existe pas.");this.setOptions(t),this._form=n;var i=this;e.switch_blur($(n).getElement("[name=texte]"),"Écrire ici..."),$(n).addEvent("submit",function(){"Écrire ici..."==$(n).getElement("[name=texte]").value&&($(n).getElement("[name=texte]").value="")}),$(n).set("send",{onRequest:function(){this.xhr.withCredentials=!0},onSuccess:function(t){try{var o=JSON.decode(t);"0"!=o.er?e.alert("Une erreur s'est produite : \n"+o.msg):($(n).reset(),e.alert(o.msg)),i._sending=!1}catch(r){e.alert("Un erreur s'est produite. ("+r+")")}}}),this._validator=new Form.Validator.Inline($(n),{stopOnFailure:!0,ignoreHidden:!1,onFormValidate:function(e,n,t){return e&&0==i._sending&&(i._sending=!0,$(n).send()),t&&t.preventDefault(),!1}});var o="*"+this.options.connect_zone,r="*"+this.options.noconnect_zone;if(o){var s=function(e){e.style.display="none"},a=function(e){e.style.display="block"};e.Sso.data(function(n){n.error?(e.forEach(e.$$(r),s),e.forEach(e.$$(o),a)):(e.forEach(e.$$(o),s),e.forEach(e.$$(r),a))})}},validator:function(){return this._validator}})}(Cad);;

!function(){var n=function(n,t,i){SqueezeBox.open("/?action=alerte&origine="+Cad.Moderate.origine+"&content_id="+n+"-"+t+"&url="+encodeURIComponent(i),{handler:"iframe",size:{x:635,y:450}})};this.Cad.Moderate={origine:"NO7AD",contrib:function(t){var i=String(location.href);-1!=i.lastIndexOf("#")&&(i=i.substr(0,i.lastIndexOf("#"))),n("contrib",t,i)},reaction:function(t,i){i&&(this.origine=i);var e=String(location.href);-1!=e.lastIndexOf("#")&&(e=e.substr(0,e.lastIndexOf("#"))),e=e+"#reaction"+t,n("reaction",t,e)},profil:function(t){var i=String(location.href);n("profil",t,i)},reactionprofil:function(t,i){var e=String(i);-1!=e.lastIndexOf("#")&&(e=e.substr(0,e.lastIndexOf("#"))),e=e+"#reaction"+t,n("reaction",t,e)}}}();;

Cad.init({api_url:"https://api-leplus.nouvelobs.com/api/",connect_url:"https://api-leplus.nouvelobs.com/api/connect/",provider_url:"https://api-leplus.nouvelobs.com/provider/",sso_url:"https://ssobs.nouvelobs.com/",debug:!1,fb_key:"221722803985",xtcore_uri:"http://referentiel.nouvelobs.com/scripts/xiti/nouvelobs.com/xtcore.js",xtcore_ssl_uri:"https://referentiel.nouvelobs.com/scripts/xiti/nouvelobs.com/xtcore.js",weborama:{src:"https://wamfactory.solution.weborama.fr/static/wamfactory.wildcard.min.js",callback:"wamf_cb"}}),Cad.Action.init();;

