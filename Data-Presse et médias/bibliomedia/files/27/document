function twitterDoc(){typeof tweetId!="undefined"&&(getUserKloutScore(screenName),getTwitterActionButtonEffects(),getUserShow(userId,screenName),getTwitterFollowButton(screenName),getKloutUserLink(screenName),getStatusShow(tweetId,function(n){$("#TwitterDoc-TweetStats-Now-NbRetweets").text(n.retweet_count);$("#TwitterDoc-TweetStats-Now-NbFavorites").text(n.retweeted_status!=undefined?n.retweeted_status.favorite_count:n.favorite_count);getConversion(n.in_reply_to_status_id_str)}),getTwittertLinks(screenName),getUserTimeLine(userId))}function parseUsername(n){return n.replace(/[@]+[A-Za-z0-9-_]+/g,function(n){var t=n.replace("@","");return'<a href="https://twitter.com/'+t+'" class="socialNetworkRef" target="twitter">'+n+"<\/a>"})}function parseHashtag(n){return n.replace(/[#]+[A-Za-z0-9-_]+/g,function(n){var t=n.replace("#","");return'<a href="https://twitter.com/#!/search?q=%23'+t+'" class="socialNetworkRef" target="twitter">'+n+"<\/a>"})}function getUserShow(n,t){$.ajax({type:"GET",url:"/Twitter/UserShow",dataType:"json",data:{userId:n},success:function(n){getUserWatchButton(t,n.name);getConfirmCreateUserWatchDlg(t,n.name);$("#TwitterAuthor-TweetStats-Now-NbRetweets").text(n.statuses_count);$("#TwitterAuthor-TweetStats-Now-NbFavorites").text(n.friends_count);var i=n.friends_count>0&&n.followers_count>0?(n.friends_count/n.followers_count).toFixed(2):0;$("#TwitterAuthor-TweetStats-Now-NbRatio").text(i>0?i:Resources.lbl_NotAvailable);$("#TwitterAuthor-TweetStats-Now-NbAbonnes").text(n.followers_count);$("#TwitterAuthor-TweetStats-Now-NbListes").text(n.listed_count);$(".Twitter-VerifiedIcon").css({display:n.verified?"inline-block":"none"});tweetsEvolution(n.statuses_count);followingEvolution(n.friends_count);ratioEvolution(i);followersEvolution(n.followers_count);aboutAuthor(n.description,n.location,n.url);$(".Doc-ListItem-SourceApp").attr("title",String.format(Resources.tooltip_TwitterSignature,""));$(".Twitter-VerifiedIcon").attr("title",Resources.tooltip_TwitterVerifiedAccount);$(".KloutFlagMedium").attr("title",Resources.tooltip_KloutScore);$(".TwitterRatioHelp").attr("title",Resources.tooltip_TwitterRatio)}})}function getUserWatchButton(n,t){$.ajax({type:"GET",url:"/Twitter/UserWatchButton",data:{screenName:n,name:t},success:function(n){$("#TwitterDoc-WatchButton").html(n)}})}function getConfirmCreateUserWatchDlg(n,t){$(document).on({click:function(){return parent.openDialog("confirmCreateUserWatch","","/Twitter/ConfirmCreateUserWatch?ScreenName="+encodeURIComponent(n)+"&Name="+encodeURIComponent(t),"520","300",Resources.lbl_Yes,Resources.lbl_No,!1,function(){$.ajax({type:"POST",url:"/Twitter/CreateUserWatch",data:{screenName:n,name:t},success:function(i){parent.closeDialog("confirmCreateUserWatch");i.length>0&&parent.openDialogConfirm("createUserWatch",i);getUserWatchButton(n,t)}})},function(){parent.closeDialog("confirmCreateUserWatch")},function(){parent.closeDialog("confirmCreateUserWatch")}),!1}},"#TwitterDoc-UserWatch")}function tweetsEvolution(n){if(n==tweetCount){$("#TwitterAuthor-TweetStats-Now-TweetsEvolution").addClass("Doc-BoldText-SmallBlue").text("=");return}if(tweetCount>0){var t=((n-tweetCount)/tweetCount*100).toFixed(2);$("#TwitterAuthor-TweetStats-Now-TweetsEvolution").addClass(t>0?"Doc-BoldText-SmallGreen":"Doc-BoldText-SmallRed").text((t>0?"+":"")+t+"%")}}function followingEvolution(n){if(n==followingCount){$("#TwitterAuthor-TweetStats-Now-SubscribersEvolution").addClass("Doc-BoldText-SmallBlue").text("=");return}if(followingCount>0){var t=((n-followingCount)/followingCount*100).toFixed(2);$("#TwitterAuthor-TweetStats-Now-SubscribersEvolution").addClass(t>0?"Doc-BoldText-SmallGreen":"Doc-BoldText-SmallRed").text((t>0?"+":"")+t+"%")}}function ratioEvolution(n){if(!isNaN(n)&&n!=0){if(n==ratio){$("#TwitterAuthor-TweetStats-Now-RatioEvolution").addClass("Doc-BoldText-SmallBlue").text("=");return}if(ratio>0){var t=((n-ratio)/ratio*100).toFixed(2);$("#TwitterAuthor-TweetStats-Now-RatioEvolution").addClass(t>0?"Doc-BoldText-SmallGreen":"Doc-BoldText-SmallRed").text((t>0?"+":"")+t+"%")}else $("#TwitterAuthor-TweetStats-Now-RatioEvolution").addClass("Doc-BoldText-BigGray").text(Resources.lbl_NotAvailable)}}function followersEvolution(n){if(n==followersCount){$("#TwitterAuthor-TweetStats-Now-AbonnesEvolution").addClass("Doc-BoldText-SmallBlue").text("=");return}if(followersCount>0){var t=((n-followersCount)/followersCount*100).toFixed(2);$("#TwitterAuthor-TweetStats-Now-AbonnesEvolution").addClass(t>0?"Doc-BoldText-SmallGreen":"Doc-BoldText-SmallRed").text((t>0?"+":"")+t+"%")}}function getTwitterActionButtonEffects(){$(document).on({mouseenter:function(){$(this).addClass("Doc-TwitterActionsText-Gray-Hover")},mouseleave:function(){$(this).removeClass("Doc-TwitterActionsText-Gray-Hover")}},".TweetActions-Details");$(document).on({mouseenter:function(){$(this).addClass("TweetActions-ReplyIcon-hover");$(this).next().addClass("Doc-TwitterActionsText-Gray-Hover")},mouseleave:function(){$(this).removeClass("TweetActions-ReplyIcon-hover");$(this).next().removeClass("Doc-TwitterActionsText-Gray-Hover")}},".TweetActions-ReplyIcon");$(document).on({mouseenter:function(){$(this).prev().addClass("TweetActions-ReplyIcon-hover");$(this).addClass("Doc-TwitterActionsText-Gray-Hover")},mouseleave:function(){$(this).prev().removeClass("TweetActions-ReplyIcon-hover");$(this).removeClass("Doc-TwitterActionsText-Gray-Hover")}},".TweetActions-Reply");$(document).on({mouseenter:function(){$(this).addClass("TweetActions-RetweetIcon-hover");$(this).next().addClass("Doc-TwitterActionsText-Gray-Hover")},mouseleave:function(){$(this).removeClass("TweetActions-RetweetIcon-hover");$(this).next().removeClass("Doc-TwitterActionsText-Gray-Hover")}},".TweetActions-RetweetIcon");$(document).on({mouseenter:function(){$(this).prev().addClass("TweetActions-RetweetIcon-hover");$(this).addClass("Doc-TwitterActionsText-Gray-Hover")},mouseleave:function(){$(this).prev().removeClass("TweetActions-RetweetIcon-hover");$(this).removeClass("Doc-TwitterActionsText-Gray-Hover")}},".TweetActions-Retweet");$(document).on({mouseenter:function(){$(this).addClass("TweetActions-FavoriteIcon-hover");$(this).next().addClass("Doc-TwitterActionsText-Gray-Hover")},mouseleave:function(){$(this).removeClass("TweetActions-FavoriteIcon-hover");$(this).next().removeClass("Doc-TwitterActionsText-Gray-Hover")}},".TweetActions-FavoriteIcon");$(document).on({mouseenter:function(){$(this).prev().addClass("TweetActions-FavoriteIcon-hover");$(this).addClass("Doc-TwitterActionsText-Gray-Hover")},mouseleave:function(){$(this).prev().removeClass("TweetActions-FavoriteIcon-hover");$(this).removeClass("Doc-TwitterActionsText-Gray-Hover")}},".TweetActions-Favorite");$(document).on({mouseenter:function(){$(this).addClass("Doc-ListItem-Hover");$(this).find(".TweetActions-Container").css({visibility:"visible"})},mouseleave:function(){$(this).removeClass("Doc-ListItem-Hover");$(this).find(".TweetActions-Container").css({visibility:"hidden"})}},".Doc-List li")}function getTwitterFollowButton(n){$("#followBtn").prop({href:"https://twitter.com/"+n});!function(n,t,i){var r,u=n.getElementsByTagName(t)[0];n.getElementById(i)||(r=n.createElement(t),r.id=i,r.src="//platform.twitter.com/widgets.js",u.parentNode.insertBefore(r,u))}(document,"script","twitter-wjs")}function getKloutUserLink(n){$(document).on({click:function(){window.open("https://klout.com/"+n)}},".KloutFlagMedium, .TwitterDoc-ListItem-KloutScore")}function getStatusShow(n,t){$.ajax({type:"GET",url:"/Twitter/StatusShow",dataType:"json",data:{statusId:n},success:function(n){t(n)}})}function getConversion(n){if(n!=null){var t={};$.ajax({type:"POST",url:"/Twitter/Conversation",dataType:"json",data:{statusId:n},success:function(n){var r="";for(var i in n)r+=tweet(n[i].id_str,n[i].user.profile_image_url_https,n[i].user.name,n[i].user.screen_name,n[i].created_at,n[i].text,n[i].source),t[n[i].user.screen_name]=n[i].user.screen_name;r.length>0&&($("#TwitterDoc-TweetConversation").html('<div id="TwitterDoc-TweetConversation-Title" class="Doc-ListSubTitle Doc-BoldText-Medium">Conversation<\/div><ul class="Doc-List">'+r+"<\/ul>"),$(".TweetActions-Container").css({visibility:"hidden"}));$(".TwitterDoc-ListItem-KloutScore").attr("title",Resources.tooltip_KloutScore);getRetweetKloutScore(t)}})}}function getTwittertLinks(n){$(".TwitterTweetsLink").on("click",function(){window.open("https://twitter.com/"+n)}).css({cursor:"pointer"});$(".TwitterFollowingLink").on("click",function(){window.open("https://twitter.com/"+n+"/following")}).css({cursor:"pointer"});$(".TwitterFollowersLink").on("click",function(){window.open("https://twitter.com/"+n+"/followers")}).css({cursor:"pointer"});$(".TwitterListsMembershipsLink").on("click",function(){window.open("https://twitter.com/"+n+"/lists/memberships")}).css({cursor:"pointer"})}function aboutAuthor(n,t,i){var r="";n!=null&&n.length>0&&(r+='<div id="TwitterDoc-Author-Bio" class="Doc-RegularText">'+parseUsername(n)+parseHashtag(n)+"<\/div>");t!=null&&t.length>0&&(r+='<div id="TwitterDoc-Author-Location-Url" class="Doc-RegularText"><a href="https://maps.google.com/maps?q='+encodeURIComponent(t)+'" target="twitter"><span class="icon-GooglePlaces icon-GooglePlaces-TwitterAuthorBio-Position" title="'+String.format(Resources.tooltip_GooglePlaces,t)+'"><\/span><span id="TwitterDoc-Author-Location">'+t+"<\/span><\/a>"+(t!=null&&t.length>0&&i!=null&&i.length>0?"<span> - <\/span>":"")+(i!=null?'<span id="TwitterDoc-Author-Url" class="TwitterDoc-UnderlinedText"><a href="'+i+'" target="twitter">'+i+"<\/a><\/span>":"")+"<\/div>");$("#TwitterDoc-Author-About").html(r)}function tweet(n,t,i,r,u,f,e){var o=jQuery.parseHTML(e);return'<li class="Doc-ListItem-ContextItem"><div class="Doc-ListItem-ImageTxtContainer"><div class="Doc-ListItem-ImageContainer"><div class="Doc-ListItem-Image Twitter-UserPic"><img src="'+t+'" /><\/div><div class="TwitterDoc-ListItem-KloutScoreContainer"><div class="TwitterDoc-ListItem-KloutScore" screenName="'+r+'"><\/div><\/div><\/div><div class="Doc-ListItem-Info"><div><span class="Doc-Header-AuthorName Doc-BoldText">'+i+'<\/span> <span class="Doc-Header-Pseudo Doc-RegularText-Gray">@'+r+'<\/span><\/div><div class="Doc-ListItem-PubDate"><span class="Doc-Header-PubDateLabel Doc-RegularText-SmallGray">'+Resources.lbl_PublishedOn+'<\/span> <span class="Doc-Header-PubDate Doc-RegularText-SmallGray">'+u+'<\/span><\/div><div class="Doc-ListItem-Core"><div class="Doc-ListItem-Text Doc-RegularText">'+parseUsername(f)+parseHashtag(f)+ + '</div>'+'<\/div><\/div><\/div><div class="Doc-ListItem-Footer"><div class="Doc-ListItem-ViaContainer"><span class="Doc-ListItem-Via Doc-RegularText-11pxGray Doc-ItalicText">Via<\/span> <span class="Doc-ListItem-SourceApp Doc-BoldText-Gray tooltipped" title="'+String.format(Resources.tooltip_TwitterSignature,"")+'">'+$(o).text()+'<\/span><\/div><div class="TweetActions-Container"><div class="TweetActions-ControlContainer"><a href="https://twitter.com/'+r+"/status/"+n+'" target="twitter" class="TwitterDoc-PlainLink"><span class="TweetActions-Details Doc-TwitterActionsText-Gray">'+Resources.lbl_Details+'<\/span><\/a><\/div><div class="TweetActions-ControlContainer"><a href="https://twitter.com/intent/tweet?in_reply_to='+n+'" class="TwitterDoc-PlainLink"><span class="TweetActions-Icons TweetActions-ReplyIcon"><\/span><span class="TweetActions-Reply Doc-TwitterActionsText-Gray">'+Resources.lbl_Reply+'<\/span><\/a><\/div><div class="TweetActions-ControlContainer"><a href="https://twitter.com/intent/retweet?tweet_id='+n+'" class="TwitterDoc-PlainLink"><span class="TweetActions-Icons TweetActions-RetweetIcon"><\/span><span class="TweetActions-Retweet Doc-TwitterActionsText-Gray">'+Resources.lbl_Twitter_Retweet+'<\/span><\/a><\/div><div class="TweetActions-ControlContainer"><a href="https://twitter.com/intent/favorite?tweet_id='+n+'" class="TwitterDoc-PlainLink"><span class="TweetActions-Icons TweetActions-FavoriteIcon"><\/span><span class="TweetActions-Favorite Doc-TwitterActionsText-Gray">'+Resources.lbl_Twitter_Favorite+'<\/span><\/a><\/div><\/div><\/div><div class="ClearRight"><\/div><\/li>'}function getUserTimeLine(n){$.ajax({type:"GET",url:"/Twitter/UserTimeline",dataType:"json",data:{userId:n},success:function(n){var i="";for(var t in n)i+=tweet(n[t].id_str,n[t].user.profile_image_url_https,n[t].user.name,n[t].user.screen_name,n[t].created_at,n[t].text,n[t].source);i.length>0&&($("#TwitterDoc-Author-LastTweets-List").html('<ul class="Doc-List">'+i+"<\/ul>"),$(".TweetActions-Container").css({visibility:"hidden"}));$(".TwitterDoc-ListItem-KloutScore").attr("title",Resources.tooltip_KloutScore);userTimeLineLoaded=!0}})}function getUserKloutScore(n){var t={};t["screenNames[0]"]=n;$.ajax({type:"POST",url:"/Twitter/Klout",dataType:"json",data:t,success:function(t){var i,r;typeof t[n]!="undefined"&&(i=t[n].score!=undefined?Math.round(t[n].score.score):0,$("#TwitterDoc-TweetHeader-KloutScore").css(i>0?{backgroundImage:"url(/images/interface/icones/kloutFlags/klout-score_54x50_"+i+".png)"}:{display:"none"}),r=setInterval(function(){userTimeLineLoaded&&(clearInterval(r),$("#TwitterDoc-Author-LastTweets-List .TwitterDoc-ListItem-KloutScore").each(function(){$(this).css(i>0?{backgroundImage:"url(/images/interface/icones/kloutFlags/klout-score_24x24_"+i+".png)"}:{display:"none"})}))},500))}})}function getRetweetKloutScore(n){var t={},i=0;for(screenName in n)t["screenNames["+i+"]"]=screenName,i++;$.ajax({type:"POST",url:"/Twitter/Klout",dataType:"json",data:t,success:function(n){$("#TwitterDoc-TweetConversation .TwitterDoc-ListItem-KloutScore").each(function(){var t=$(this).attr("screenName"),i;typeof n[t]!="undefined"&&(i=n[t].score!=undefined?Math.round(n[t].score.score):0,$(this).css(i>0?{backgroundImage:"url(/images/interface/icones/kloutFlags/klout-score_24x24_"+i+".png)"}:{display:"none"}))})}})}function facebookDoc(){var n,t;$("#facebookAbout").length>0&&(n=$("#facebookAbout").attr("authorId"),$.ajax({type:"GET",url:"https://graph.facebook.com/"+n,dataType:"jsonp",success:function(n){var t=(n.likes!=undefined?"<li>"+n.likes+'<br/><center><table><tr><td><img src="/images/interface/icones/facebook-like-icon.png" border="0"/><\/td><td>'+$("#likeThis").text()+"<\/td><\/tr><\/table><\/center><\/li>":"")+(n.talking_about_count!=undefined?"<li>"+n.talking_about_count+"<br />"+$("#talkingAbout").text()+"<\/li>":""),i;t=t!=""?'<ul class="facebookBox">'+t+'<\/ul><div style="clear: both;"/>':"";i='<div class="facebookProfile">'+(n.picture!=undefined?'<img src="'+n.picture+'" border="0" align="left"/>':"")+'<p><a href="'+n.link+'" target="facebook">'+n.name+"<\/a><br />"+(n.category!=undefined?'<span class="documentLabel">'+$("#category").text()+n.category+"<\/span><br />":"")+(n.founded!=undefined?'<span class="documentLabel">'+$("#founded").text()+n.founded+"<\/span>":"")+'<\/p><\/div><div style="clear: both;"/>'+(n.company_overview!=undefined?"<p>"+n.company_overview+"<\/p>":"")+(n.mission!=undefined?"<p>"+n.mission+"<\/p>":"")+(n.products!=undefined?"<p>"+n.products+"<\/p>":"")+(n.general_info!=undefined?"<p>"+n.general_info+"<\/p>":"");n.name!=undefined?$("#facebookAboutContent").html(t+i):$("#facebookAbout").css({display:none})}}));$("#facebookContext").length>0&&(t=$("#facebookContext").attr("networkId"),$.ajax({type:"GET",url:"https://graph.facebook.com/"+t,dataType:"jsonp",success:function(n){var r,t,i;if($("#facebookContext").css("display",""),n.error==undefined){for(r=(n.comments.count!=undefined?"<li>"+n.comments.count+"<br />"+$("#comments").text()+"<\/li>":"")+(n.likes.count!=undefined?"<li>"+n.likes.count+'<br/><center><table><tr><td><img src="/images/interface/icones/facebook-like-icon.png" border="0"/><\/td><td>'+$("#likeThis").text()+"<\/td><\/tr><\/table><\/center><\/li>":""),r=r!=""?'<ul class="facebookBox">'+r+'<\/ul><div style="clear: both;"/>':"",t="",i=0;i<n.comments.data.length;i++)t+='<li><span class="socialNetworkName">'+n.comments.data[i].from.name+"<\/span><br/><p>"+n.comments.data[i].message+'<\/p><p class="socialNetworkCreatedAt">'+n.comments.data[i].created_time+"<\/p><\/li>";t=t!=""?'<ul class="recentComments">'+t+"<\/ul>":"";$("#facebookContext").html(r+t)}}}))}function onMultiSelection(){$(".div-basket-actions").on("click","#btnMultiSelection",function(){onMSButtonActive(_isMultiSelectionEnabled);onSetCounter(_isMultiSelectionEnabled);disableButtons(!_isMultiSelectionEnabled);_isMultiSelectionEnabled&&countPlaceholder>1?disableButtons(!1):_isMultiSelectionEnabled||parseInt($("#basketCircleCount").text())!=0||$(this).prop("disabled",!1);_viewContext=="search"&&$("#bsktSubmenu").toggleClass("bskt-submenu");_isMultiSelectionEnabled=!_isMultiSelectionEnabled;setMultiSelectList($(".items>li"))})}function onMSDocumentClick(){$(document).on("click",".msDocItem",function(){if(!$(this).hasClass("Unknown")){var n=$(this),i=$("#basketCircleCount"),t=parseInt(i.text());n.hasClass("msDocItemSelected")?(n.removeClass("msDocItemSelected"),n.find(".item-selected").addClass("hidden-item"),t--):(n.addClass("msDocItemSelected"),n.find(".item-selected").removeClass("hidden-item"),t++);t===0?(disableButtons(!0),$("#btnMultiSelection").prop("disabled",!1)):t===1&&disableButtons(!1);i.text(t)}})}function setMultiSelectList(n){_isMultiSelectionEnabled?n.addClass("msDocItem").removeClass("docItem"):(n.addClass("docItem").removeClass("msDocItem msDocItemSelected"),$(".item-selected").addClass("hidden-item"))}function onEmptyDocumentList(){parseInt($("#basketCircleCount").text())==0&&_viewContext!="search"&&disableButtons(!0)}function onMSButtonActive(n){var t=$("#btnMultiSelection"),i=t.children(".fa");n?i.addClass("fa-check").removeClass("fa-times"):i.addClass("fa-times").removeClass("fa-check");t.toggleClass("ms-active");$(".btn-multiselection-text, .btn-multiselection-cancel").toggleClass("hidden-lbl")}function onSetCounter(n){var t=$("#basketCircleCount"),i=0;n?i=countPlaceholder:countPlaceholder=t.text();t.toggleClass("basket-count-multi").text(i)}function onFixToTop(){$(window).on("scroll",fixToTop)}function onSort(){$("#docList").on("change","#ddlSort",function(){$.ajax({type:"POST",url:"/Toolbar/SortDocuments",data:{toolType:_toolType,sortValue:$("#ddlSort").val()},dataType:"json",complete:function(){_toolType==1?document.forms[0].submit():document.location.reload()}})})}function onButtonBasketSave(){$(document).on("click","#btnBasketSave",function(){var i=$(this).css("opacity","0.4"),n=setBtnOptions("/Topic/MultiSaveDocs",!0),t;$("#imgWait").css("display","block");_isMultiSelectionEnabled||(t="/Topic/"+(_MVCPath=="/Folder/"||_MVCPath=="/Alert/"||_MVCPath=="/PressReview/"?"FolderSaveDocs":"BasketSaveDocs"),n=setBtnOptions(t,!1));$.ajax(n).fail(function(n){alert(n.errorMsg)}).done(function(){window.location="/Document/SavePDF"}).always(function(){i.css("opacity","1");$("#imgWait").css("display","none");_isMultiSelectionEnabled&&disableMultiselection()})})}function onButtonBasketSend(){$(document).on("click","#btnBasketSend",function(){$("#divBasketSend").toggle()});$(document).on("click","#chkBasketFraisVisualisation",function(){$("#unitBasketAccess").toggle()});$(document).on("keypress","#txtBasketNbAcces",function(n){n=n?n:window.event;var t=n.which?n.which:n.keyCode;return t>31&&(t<48||t>57)?!1:!0});$(".div-basket-actions").on("clickoutside",function(){$("#divBasketSend").css("display","none")})}function onButtonBasketSendOK(){$(document).on("click","#btnBasketSendOk",function(){var t=$("#taBasketEmailAdress").val(),i=$("#taBasketMessage").val(),r=$("#chkBasketFraisVisualisation").is(":checked"),u=$("#txtBasketNbAcces").val(),f=$("#txtCodeFact").val(),e=_isMultiSelectionEnabled?$(".msDocItemSelected"):$(".docItem"),n;_isMultiSelectionEnabled?(n="/Topic/MultiSendDocs",$.ajax({type:"POST",url:n,dataType:"json",data:{email:t,msg:i,fraisVisualisation:r,nbAcces:u,codeFact:f,docKeys:getDocsArray(e)},success:function(n){var t=n.error;t!=""&&t!=null?alert(t):($("#divBasketSend").css("display","none"),_isMultiSelectionEnabled&&disableMultiselection(),alert(n.message))}})):(n="/Topic/"+(_MVCPath=="/Folder/"||_MVCPath=="/Alert/"||_MVCPath=="/PressReview/"?"FolderSendDocs":"BasketSendDocs"),$.ajax({type:"POST",url:n,dataType:"json",data:{email:t,msg:i,fraisVisualisation:r,nbAcces:u,codeFact:f},success:function(n){var t=n.errorMsg;t!=""&&t!=null?alert(t):($("#divBasketSend").css("display","none"),alert(n.message))}}))})}function onButtonBasketDelete(){$(document).on("click","#btnBasketDelete",function(){var n=parseInt($("#basketCount").text());_isMultiSelectionEnabled?openMyModal("/Topic/EmptyBasket?multiSelect=true&count="+$(".msDocItemSelected").length,$(window).width()<=640?300:350,105):openMyModal("/Topic/EmptyBasket?multiSelect=false&count="+n,$(window).width()<=640?300:350,105)})}function onButtonBasketPrint(){$(document).on("click","#btnBasketPrint",function(){var n=setBtnOptions("/Topic/MultiPrintDocs",!0),t;_isMultiSelectionEnabled||(t="/Topic/"+(_MVCPath=="/Folder/"||_MVCPath=="/Alert/"||_MVCPath=="/PressReview/"?"FolderPrintDocs":"BasketPrintDocs"),n=setBtnOptions(t,!1));$.ajax(n).fail(function(n){alert(n.errorMsg)}).done(function(n){if(n){if(isAndroid){var t=window.open("/Document/PrintSaveHtml");t.addEventListener("load",function(){t.print();setTimeout(function(){t.close()},0)},!0)}else $("#btnBasketPrintHidden").click();_isMultiSelectionEnabled&&disableMultiselection()}})})}function onbtnBasketPrintList(){$(document).on("click","#btnBasketPrintList",function(){if(_isMultiSelectionEnabled){var n=getDocsArray($(".msDocItemSelected")),t="?";for(i=0;i<n.length;i++)t+="docKeys="+encodeURIComponent(n[i])+"&";window.open("/DocumentList/PrintListMulti"+t)}else _toolType!=0?window.open("/DocumentList/PrintList?listType="+_toolType):window.open("/DocumentList/PrintListBasket")})}function onButtonAddToBasket(){$(document).on("click","#btnAddToBasket",function(){var n=_isMultiSelectionEnabled?$(".msDocItemSelected"):$(".docItem"),t=parseInt($("#basketCount").text());_isMultiSelectionEnabled||_viewContext=="search"?$.ajax({type:"POST",url:"/Document/AddToBasket",data:{docKeys:getDocsArray(n)}}).fail(function(i,r,u){if($("#basketCount").text(i.DocCount),openDialogConfirm("ErrorMsgDlg",i.Error,260,180),u==="BASKET_LIMIT"&&t<50){var f=n.length,e=f-(t+f-i.DocCount);n.slice(0,e).children(".item-in-bskt").removeClass("hidden-item")}}).done(function(t){$("#basketCount").text(t.DocCount);Glow(!0);n.children(".item-in-bskt").removeClass("hidden-item");setTimeout(function(){Glow(!1)},2e3)}).always(function(){_isMultiSelectionEnabled&&disableMultiselection()}):$.ajax({type:"POST",url:"/Topic/AddAllToBasket"}).fail(function(i,r,u){if($("#basketCount").text(i.DocCount),openDialogConfirm("ErrorMsgDlg",i.Error,260,180),u==="BASKET_LIMIT"&&t<50){var f=n.length,e=f-(t+f-i.DocCount);n.slice(0,e).children(".item-in-bskt").removeClass("hidden-item")}}).done(function(t){$("#basketCount").text(t.DocCount);Glow(!0);n.children(".item-in-bskt").removeClass("hidden-item");setTimeout(function(){Glow(!1)},2e3)})})}function getDocsArray(n){var t=[];return n.each(function(){t.push($(this).attr("id"))}),t}function disableMultiselection(){$("#btnMultiSelection").click()}function setBtnOptions(n,t){var i={type:"POST",url:n};return t&&(i.data={docKeys:getDocsArray($(".msDocItemSelected"))}),i}function onButtonPrevLevel(){if(typeof _groupId!="undefined"&&_groupId>0){$(".bskt-topic-name").addClass("with-back");$("#prevLevel").show().on("click",function(){window.location=_topicId===0?_MVCPath+_themeId:_MVCPath+_themeId+"/"+_groupId})}}function onButtonBasketClose(){$("#btnBasketClose").on("click",function(){var n=document.referrer,t=n.replace("http://"+document.domain,"");window.location=t})}function isMobileDevice(){var n={};return n.isMobileDevice=function(){return typeof orientation!="undefined"||navigator.userAgent.indexOf("IEMobile")!==-1},n.isMobileDevice()}function enableTooltips(){var n=isMobileDevice();n||tooltips()}function tooltips(){$(".tooltipped").tooltip({content:function(){return $(this).attr("title")},position:{my:"left top",at:"center bottom"},show:{delay:800},open:function(n,t){if(typeof n.originalEvent=="undefined")return!1;var i=$(t.tooltip).attr("id");return $("div.ui-tooltip").not("#"+i).remove(),!0},close:function(n,t){t.tooltip.hover(function(){$(this).stop(!0).fadeTo(0,1)},function(){$(this).fadeOut("0",function(){$(this).remove()})})}})}function pdfViewer(){var u;if(typeof _hasPDF!="undefined"&&_hasPDF){var n=typeof _mobileWidth!="undefined"&&_mobileWidth,t=$("#pdfReportImg").length>0,i=t?"#pdfReportImg":n?"#docText footer":".DocText",r="<div class='rep-pdf-thumbs'><div class='rep-thumbs-spinner'><i class='fa fa-spinner fa-spin'><\/i><\/div><\/div>";t?n?$(r).insertAfter(i):$(r).insertBefore(i):$(i).prepend("<div class='doc-pdf-thumbs'><div class='thumbs-spinner'><img src='/Content/images/loading.gif' class='thumbs-spinner-img' /><\/div><\/div>");u=$.ajax({type:"GET",url:"/Pdf/ThumbnailList?docName="+encodeURIComponent(_docName),contentType:"application/json; charset=utf-8",dataType:"html"});u.done(function(i){t?renderPdfReport(JSON.parse(i)):renderPdf(i);!n&&$(".Doc-ComplementsBasPage").length>0&&$(".Doc-ComplementsBasPage").addClass("clearfix-both")})}}function renderPdf(n){$(".doc-pdf-thumbs").html(function(){return typeof _mobileWidth!="undefined"&&_mobileWidth?pdfHtmlMobile(JSON.parse(n)):pdfHtmlDesktop(JSON.parse(n))})}function renderPdfReport(n){var t=0,i=n[t];$(".rep-pdf-thumbs").html("<img class='rep-pdf-img' id='"+i+"' src='/Pdf/Thumb?imageIndex="+t+"&id="+i+"'>")}function pdfHtmlDesktop(n){for(var i,u,f=n.length,r="",t=0;t<f;t++)i=n[t],u="page "+i.slice(i.lastIndexOf("·")+1),t==0?r+="<div class='first-thumb'><figure><img data-page='"+t+"' class='thumb-link' id='"+escape(i)+"' src='/Pdf/Thumb?imageIndex="+t+"&id="+escape(i)+"'><figcaption>"+u+"<\/figcaption><\/figure><\/div>":t>0&&t<=3?(t==1&&(r+="<div class='small-thumb'>"),r+="<figure><img data-page='"+t+"' class='thumb-link' id='"+escape(i)+"' src='/Pdf/Thumb?imageIndex="+t+"&id="+escape(i)+"'><figcaption class='sm-thumb-caption'>"+u+"<\/figcaption><\/figure>",(t==f-1||t==3)&&(r+="<\/div>")):(t==4&&(r+="<div>"),r+="<a data-page='"+t+"' id='"+escape(i)+"' href='/Pdf/Thumb?imageIndex="+t+"&id="+escape(i)+"' class='thumb-link'>"+u+"<\/a>",t==f-1&&(r+="<\/div>"));return r+"<\/div>"}function pdfHtmlMobile(n){for(var i,f,u=n.length,r="",t=0;t<u;t++)i=n[t],f="page "+i.slice(i.lastIndexOf("·")+1),t==0&&(r+="<div class='small-thumb'>"),r+="<figure><img class='thumb-link' id='"+i+"' src='/Pdf/Thumb?imageIndex="+t+"&id="+i+"'><figcaption class='sm-thumb-caption'>"+f+"<\/figcaption><\/figure>",t==u-1&&(r+="<\/div>");return r+"<\/div>"}function getDocPosition(){_docKeyPos=$.inArray(_docKey,_docKeyList);_sizeList=_docKeyList.length}function setDocPosition(){_docKey=_docKeyList[_docKeyPos]}function onDocumentOpened(){_docOpening=!1;pdfViewer();$(".documentList").stopScrollPagination();$(window).scrollTop(0);entityList();clearTimeout(_animTimer);_animTimer=null;$("#loading").fadeOut().remove();$(".mainPanel").css("background","#fff");$("#headerInfo").hide();$("#divResultFilters").hide();$("#basketHeader").length>0&&($(".folder-info-menu").hide(),$("#basketHeader").removeClass("folder-info"));getDocPosition();$doc=$("#currentDoc");$doc.swipe(swipeOptionsDocument);_docWidth=$("article").width();_isEntity||_docKeyPos==0?$("#prevDoc").hide():$("#prevDoc").show();_isEntity||_docKeyPos==_sizeList-1?$("#nextDoc").hide():$("#nextDoc").show();setTimeout(function(){scrollDocument(0,0)},_animSpeed*.3);_sourceTypeId==403&&socialNetwork();$("#divActions").on("clickoutside",function(){$("#divSend, #divDeepLink").css("display","none")});if($("#goToTop").hide(),$(window).width()<450&&isPortrait()){$(".mainPanel").css("top","0");$("#divActionsSubMenu").on("clickoutside",showSubMenu);$(".actions-item").length>2&&($("#divActionsSubMenu").addClass("sub-menu-active"),$("#btnActionsSubMenu").show())}typeof Video!="undefined"&&(Video._ready=!1);typeof _vidLink!="undefined"&&_vidLink!=null&&eval(_vidLink);typeof _mediatype!="undefined"&&_mediatype!==null&&initPlayerPanel();typeof _txtMore!="undefined"&&$("#lblDescription").shorten({showChars:200,moreText:_txtMore,lessText:"[-]"})}function entityList(){var t={},n=0;if(_docType!=2&&_docType!=3){if(_docKey in _entityListCache){$("#entityList").html(_entityListCache[_docKey]);_entityListOffset>0&&($(window).scrollTop(_entityListOffset),_entityListOffset=0);return}for(key in _personDic)t["entityIds["+n+"]"]=_personDic[key],n++;for(key in _orgDic)t["entityIds["+n+"]"]=_orgDic[key],n++;n!=0&&$.ajax({type:"POST",url:"/Stubs/EntityList",data:t,success:function(n){var t='<ul class="documentList entityList items clearfix">'+n+"<\/ul>";_entityListCache[_docKey]=t;$("#entityList").html(t)}})}}function onEntityClick(){$(document).on("click",".entityList .docItem",function(){openEntity($(this).attr("id"))})}function onButtonSave(){$(document).on("click","#btSave",function(){$("#divSend").css("display","none");$("#btSave").css("opacity","0.4");$("#imgWait").css("display","block");$.ajax({type:"POST",url:"/Document/ValidSaveDoc",data:{docRefId:_isEntity?-1:_docRefId,docName:_docName,kwicTvRadio:getTvRadioKwikMode()},dataType:"json",success:function(n){var t,r,i;n!=!0?(t=n.confirmMsg,t!=""&&t!=null&&(r=confirm(t),r&&(window.location="/Document/SavePDF")),i=n.errorMsg,i!=""&&i!=null&&alert(i)):window.location="/Document/SavePDF"},complete:function(){$("#btSave").css("opacity","1");$("#imgWait").css("display","none")}})})}function onButtonPrint(){$(document).on("click","#btPrint",function(){$("#divSend, #divDeepLink").css("display","none");window.print()})}function onButtonSend(){$(document).on("click","#btSend",function(){$("#divSend").toggle();$("#divDeepLink").hide()});$(document).on("click","#chkFraisVisualisation",function(){$("#unitAccess").toggle()});$(document).on("keypress","#txtNbAcces",function(n){n=n?n:window.event;var t=n.which?n.which:n.keyCode;return t>31&&(t<48||t>57)?!1:!0})}function onDeepLink(){$(document).on("click","#btLink",function(){$("#divSend").hide();$("#divDeepLink").toggle();$("#urlDeepLink").select()})}function onButtonSendOK(){$(document).on("click","#btnSendOk",function(){var n=$("#taEmailAdress").val(),t=$("#taMessage").val(),i=$("#chkFraisVisualisation").is(":checked"),r=$("#txtNbAcces").val(),u=$("#txtCodeFact").val();$.ajax({type:"POST",url:"/Document/Send",dataType:"json",data:{docRefId:_isEntity?-1:_docRefId,docName:_docName,email:n,msg:t,fraisVisualisation:i,nbAcces:r,codeFact:u},success:function(n){var t=n.error;t!=""&&t!=null?alert(t):($("#divSend").css("display","none"),alert(n.message))}})})}function closeDoc(){(typeof _mediatype!="undefined"&&_mediatype!=null||typeof _vidLink!="undefined"&&_vidLink!=null)&&closePlayerPanel();$("#headerInfo").show();$("#divResultFilters").show();$("article").hide();$("aside").show();$(".docContainer").empty();showZoteroSpans();$("#loading").length<=0&&$("body").append('<div id="loading" style="display:none;"><\/div>');$("#basketHeader").length>0&&($(".folder-info-menu, .basket-close-wrapper").show(),$("#basketHeader").addClass("folder-info"));_viewContext=="basket"&&_updatePinnedDocs&&(updatePinnedDocumentsNav(),_updatePinnedDocs=!1);onTextOverflow($(".items li"));$("#goToTop").toggle($(".mainPanel").scrollTop()>150);$(window).scrollTop(_oldScrollPos);$(".documentList").each(function(){var n=$(this).children("li").length,t=$(this).data("count");n<t&&$(this).startScrollPagination()})}function buttonClose(){var n;if(_isEntity){_isEntity=!1;openDocument();return}_viewContext=="alert"?(n=_MVCPath+_themeId+"/"+_groupId+"/"+_topicId,history.pushState(null,document.title,n)):_viewContext=="alertRef"?(n=_MVCPath+_topicId,history.pushState(null,document.title,n)):(n=_viewContext=="search"?"/Search/ResultMobile/":"/Pinned/",history.pushState(null,document.title,n));closeDoc()}function onButtonPDF(){$(document).on("click","#pdfLink",function(){eval(_pdfLink)})}function onButtonClose(){$("body").on("keyup",function(n){n.which===27&&buttonClose()});$(document).on("click","#btClose",function(){buttonClose()})}function onButtonBasket(){$(document).on("click","#btAddBasket",function(){var n=[_docKey],t=getListItemByDocKey(n);$.ajax({type:"POST",url:"/Document/AddToBasket",data:{docKeys:n}}).fail(function(n){openDialogConfirm("ErrorMsgDlg",n.Error,260,180)}).done(function(n){$("#btAddBasket").prop("disabled",!0).removeClass("background_normal").addClass("background_disable");$("#basketCount").text(n.DocCount);Glow(!0);$(window).width()<640&&($("#btAddBasket").next(".actions-submenu-lbl").attr("disabled","disabled"),$("#divActionsSubMenu").hide());t.children(".item-in-bskt").removeClass("hidden-item");$("#deleteFromBasket").show();setTimeout(function(){Glow(!1)},2e3)})})}function onButtonRemoveBasket(){$(document).on("click",".btn-dlt-basket",function(){var n=[_docKey],t=$(this);$.ajax({type:"POST",url:"/Document/RemoveFromBasket",data:{docKeys:n}}).fail(function(n){openDialogConfirm("ErrorMsgDlg",n.Error,230,260)}).done(function(i){var u=i.DocCount,r;$("#btAddBasket").prop("disabled",!1).removeClass("background_disable").addClass("background_normal");$("#basketCount, #basketCircleCount").text(u);$(window).width()<640&&$("#btAddBasket").next(".actions-submenu-lbl").attr("disabled",!1);r=getListItemByDocKey(n);_viewContext=="basket"?(r.remove(),_updatePinnedDocs=!0,u===0&&disableButtons(!0)):r.children(".item-in-bskt").addClass("hidden-item");t.hide()})})}function updatePinnedDocumentsNav(n){typeof n!="undefined"?$.each(n,function(n,t){_docKeyList.splice(_docKeyList.indexOf(t),1)}):_docKeyList.splice(_docKeyList.indexOf(_docKey),1);_maxDoc=_docKeyList.length}function getListItemByDocKey(n){return $("#container > li").filter(function(){return $(this).attr("id")==n})}function onButtonActions(){var n=new Clipboard("#btLink");$(document).on("click","#btnActionsSubMenu",function(n){n.stopPropagation();var t=$("#divActionsSubMenu");t.is(":visible")?t.hide():t.css("display","inline-block")});$(document).on("click",".actions-submenu-lbl",function(){$(this).prev("button").click()})}function showWaitingAnim(){$("#loading").length>0?(clearTimeout(_animTimer),_animTimer=null,$("#loading").remove()):$("body").append('<div id="loading" style="display:inline-block;"><\/div>')}function initPlayerPanel(){showConsole();Video.InitPlayer()}function closePlayerPanel(){Video.ClosePlayer();$(".ContainPlayer").hide().removeClass("contentPlayer-height");$(".nextVideoConsole").remove();$("#divResultFilters").length==0&&$(".mainPanel").css({top:""})}function onDocumentNavClick(){function n(){typeof _mediatype!="undefined"&&_mediatype!==null&&closePlayerPanel();setDocPosition();$(".docContainer").animate({opacity:0},200,"",function(){_animTimer=setTimeout("showWaitingAnim()",_animSpeed+5);$(".mainPanel").scrollTop(0);openDocument()})}function t(){_docKeyPos!=0&&(getDocPosition(),_docKeyPos--,_viewContext=="basket"&&_updatePinnedDocs&&(updatePinnedDocumentsNav(),_updatePinnedDocs=!1),n())}function i(){_docKeyPos!=_sizeList-1&&(_viewContext=="basket"&&_updatePinnedDocs&&(updatePinnedDocumentsNav(),_updatePinnedDocs=!1),getDocPosition(),_docKeyPos++,n())}$("#prevDoc").click(function(){t()});$("#nextDoc").click(function(){i()});$("body").on("keyup",function(n){$(n.target).is("input, textarea")||(n.which===37&&$("#prevDoc").is(":visible")&&t(),n.which===39&&$("#nextDoc").is(":visible")&&i())})}function showWaitingAnimTouch(){$(".mainPanel").css("background","#fff url('/Content/images/loading.gif') no-repeat center")}function animateSlideDoc(){typeof _mediatype!="undefined"&&_mediatype!==null&&closePlayerPanel();$(".mainPanel").scrollTop(0);setDocPosition();openDocument()}function previousDoc(){if(getDocPosition(),_docKeyPos==0){scrollDocument(0,_animSpeed);return}_docKeyPos--;_viewContext=="basket"&&_updatePinnedDocs&&(updatePinnedDocumentsNav(),_updatePinnedDocs=!1);_animTimer=setTimeout("showWaitingAnimTouch()",_animSpeed+50);scrollDocument(-_docWidth,_animSpeed);animateSlideDoc()}function nextDoc(){if(_viewContext=="basket"&&_updatePinnedDocs&&(updatePinnedDocumentsNav(),_updatePinnedDocs=!1),getDocPosition(),_docKeyPos==_sizeList-1){scrollDocument(0,_animSpeed);return}_docKeyPos++;_animTimer=setTimeout("showWaitingAnimTouch()",_animSpeed+50);scrollDocument(_docWidth,_animSpeed);animateSlideDoc()}function swipeStatusDocument(n,t,i,r){if(t=="move"&&(i=="up"||i=="down"))return!1;if(t=="move"&&(i=="left"||i=="right")){var u=0;i=="left"?scrollDocument(r,u):i=="right"&&scrollDocument(-r,u)}else t=="cancel"?scrollDocument(0,_animSpeed):t=="end"&&(i=="right"?previousDoc():i=="left"&&nextDoc())}function scrollDocument(n,t){$doc.css("-webkit-transition-duration",(t/1e3).toFixed(1)+"s");$doc.css("transition-duration",(t/1e3).toFixed(1)+"s");var i=(n<0?"":"-")+Math.abs(n).toString();$doc.css("-webkit-transform","translate3d("+i+"px,0px,0px)");$doc.css("-ms-transform","translate3d("+i+"px,0px,0px)");$doc.css("-moz-transform","translate3d("+i+"px,0px,0px)");$doc.css("transform","translate3d("+i+"px,0px,0px)")}function scrollToAnchor(n){var t=$("a[name='"+n+"']");$("html, body").animate({scrollTop:t.offset().top},"slow")}function socialNetwork(){$(".socialHelp").attr("title",Resources.tooltip_SocialHelp);twitterDoc()}function onPdfThumb(){$(document).on("click",".thumb-link",function(n){n.preventDefault();var t=unescape($(this).attr("id")),i=$(this).data("page");_pdfKiosque?window.open("/WebPages/Pdf/SearchResult.aspx?DocName="+encodeURIComponent(t),"pdfPopup","width=800,height=600,location=no,menubar=no,resizable=yes,scrollbars=yes,status=no,titlebar=no,toolbar=no").focus():window.open("/WebPages/DocumentPDF.aspx?DocName="+encodeURIComponent(_docName)+"&PageIndex="+i,"pdfPopup","width=800,height=600,location=no,menubar=no,resizable=yes,scrollbars=yes,status=no,titlebar=no,toolbar=no").focus()})}function playEloda(n,t,i,r,u,f,e){var o=$(window).width()<=640?135:280;Video.SetTime(f);Video.PlayEloda(n,t,i,r,u,e,o)}function playTvFrance(n,t,i,r,u,f,e){var o=$(window).width()<=640?135:280;Video.SetTime(f);Video.PlayTvFrance(n,t,i,r,u,e,o)}function playMP3(n,t,i,r,u){Video.SetTime(r);Video.PlayMP3(n,t,i,u)}function playFile(n,t,i){var r=$(window).width()<=640?135:280;Video.PlayFile(n,t,i,r)}function onAPDClick(){$("#doc").on("click",".docComplementLink",function(n){return n.preventDefault(),!1})}var userTimeLineLoaded,fixToTop,$doc,_docWidth,_sizeList,swipeOptionsDocument,showSubMenu;String.format=function(){for(var i,t=arguments[0],n=1;n<arguments.length;n++)i=new RegExp("\\{"+(n-1)+"\\}","gm"),t=t.replace(i,arguments[n]);return t};userTimeLineLoaded=!1;$(document).on("click","#summarytabs",function(n){n.preventDefault();$("#summarytxt").css({display:""});$("#toctxt").css({display:"none"});$(this).addClass("in");$("#toctabs").removeClass("in")});$(document).on("click","#toctabs",function(n){n.preventDefault();$("#toctxt").css({display:""});$("#summarytxt").css({display:"none"});$(this).addClass("in");$("#summarytabs").removeClass("in")});$(document).on("click","#downloadreport",function(n){n.preventDefault();var t=$(this).attr("href"),i=$(this).attr("target");return window.open(t,i),!1});(function(n){n.fn.printPage=function(t){function u(){return n("#sectionOpenType").length>0}function f(){i.url=_docPrintUrl+"&KwikMode="+getTvRadioKwikMode()}function e(t,i){!i.docList&&u()&&f();n("body").append(r.messageBox(i.message));n("#printMessageBox").css("opacity",0);n("#printMessageBox").animate({opacity:1},300,function(){o(t,i)})}function o(t,i){var u=i.url?i.url:n(t).attr(i.attr);if(n("#printPage")[0])n("#printPage").attr("src",u);else{n("body").append(r.iframe(u));n("#printPage").on("load",function(){s()})}}function s(){frames.printPage.focus();var n=window.navigator.userAgent.toLowerCase(),t=n.indexOf("msie ")>-1||n.indexOf("trident/")>-1?!0:!1;if(t)try{frames.printPage.document.execCommand("print",!1,null)}catch(i){window.print()}else frames.printPage.print();h()}function h(){n("#printMessageBox").delay(1e3).animate({opacity:0},700,function(){n(this).remove()})}var i={attr:"href",url:!1,message:"Please wait while we create your document",docList:!1},r;n.extend(i,t);this.on("click",function(){return e(this,i),!1});r={iframe:function(n){return'<iframe id="printPage" name="printPage" src='+n+' style="height:0px; width: 0px; display:inline-block; overflow:hidden;"><\/iframe>'},messageBox:function(n){return"<div id='printMessageBox' style='                          position:fixed;                          top:50%; left:50%;                          text-align:center;                          margin: -60px 0 0 -155px;                          width:210px; height:32px; font-size:16px; padding-top:4px; color:#000; font-family:helvetica, arial;                          opacity:0;                          z-index:100;                          background:#fff;                          border: 4px solid #777;                          box-shadow:0px 0px 10px #888; -webkit-box-shadow:0px 0px 10px #888; -moz-box-shadow:0px 0px 10px #888'>                          "+n+"<\/div>"}}}})(jQuery),function(n){n.fn.shorten=function(t){"use strict";var i={showChars:100,ellipsesText:"...",moreText:"more",lessText:"less",errMsg:null,force:!1};if(t&&n.extend(i,t),n(this).data("jquery.shorten")&&!i.force)return!1;n(this).data("jquery.shorten",!0);n(document).off("click",".morelink");n(document).on({click:function(){var t=n(this);return t.hasClass("less")?(t.removeClass("less"),t.html(i.moreText),t.parent().prev().prev().show(),t.parent().prev().hide()):(t.addClass("less"),t.html(i.lessText),t.parent().prev().prev().hide(),t.parent().prev().show()),!1}},".morelink");return this.each(function(){var f=n(this),t=f.html(),y=f.text().length,e,r,l,c,v;if(y>i.showChars){if(e=t.substr(0,i.showChars),e.indexOf("<")>=0){var o=!1,h="",a=0,u=[],s=null;for(r=0,l=0;l<=i.showChars;r++)if(t[r]!="<"||o||(o=!0,s=t.substring(r+1,t.indexOf(">",r)),s[0]=="/"?s!="/"+u[0]?i.errMsg="ERROR en HTML: the top of the stack should be the tag that closes":u.shift():s.toLowerCase()!="br"&&u.unshift(s)),o&&t[r]==">"&&(o=!1),o)h+=t.charAt(r);else if(l++,a<=i.showChars)h+=t.charAt(r),a++;else if(u.length>0){for(c=0;c<u.length;c++)h+="<\/"+u[c]+">";break}e=n("<div/>").html(h+'<span class="ellip">'+i.ellipsesText+"<\/span>").html()}else e+=i.ellipsesText;v='<span class="shortcontent">'+e+'<\/span><span class="allcontent">'+t+'<\/span><span> <a href="javascript://nop/" class="morelink">'+i.moreText+"<\/a><\/span>";f.html(v);f.find(".allcontent").hide();n(".shortcontent p:last",f).css("margin-bottom",0)}})}}(jQuery);fixToTop=debounce(function(){$(window).scrollTop()>275?$("#toolbarMenu").addClass("fixedButtons"):$("#toolbarMenu").removeClass("fixedButtons")},250);$(document).ready(function(){onEmptyDocumentList();onMultiSelection();onMSDocumentClick();onSort();onFixToTop()});$(document).ready(function(){onButtonBasketDelete();onButtonBasketSave();onButtonBasketSend();onButtonBasketSendOK();onButtonBasketPrint();onButtonAddToBasket();onbtnBasketPrintList();$("#btnBasketPrintHidden").printPage({url:"/Document/PrintSaveHtml",attr:"href",message:_lbl_pleaseWait});onButtonBasketClose()});!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this;t.Clipboard=n()}}(function(){var n;return function n(t,i,r){function u(f,o){var h,c,s;if(!i[f]){if(!t[f]){if(h="function"==typeof require&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;}s=i[f]={exports:{}};t[f][0].call(s.exports,function(n){var i=t[f][1][n];return u(i?i:n)},s,s.exports,n,t,i,r)}return i[f].exports}for(var e="function"==typeof require&&require,f=0;f<r.length;f++)u(r[f]);return u}({1:[function(n,t){function r(n,t){for(;n&&n.nodeType!==u;){if(n.matches(t))return n;n=n.parentNode}}var u=9,i;Element&&!Element.prototype.matches&&(i=Element.prototype,i.matches=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector);t.exports=r},{}],2:[function(n,t){function i(n,t,i,u,f){var e=r.apply(this,arguments);return n.addEventListener(i,e,f),{destroy:function(){n.removeEventListener(i,e,f)}}}function r(n,t,i,r){return function(i){i.delegateTarget=u(i.target,t);i.delegateTarget&&r.call(n,i)}}var u=n("./closest");t.exports=i},{"./closest":1}],3:[function(n,t,i){i.node=function(n){return void 0!==n&&n instanceof HTMLElement&&1===n.nodeType};i.nodeList=function(n){var t=Object.prototype.toString.call(n);return void 0!==n&&("[object NodeList]"===t||"[object HTMLCollection]"===t)&&"length"in n&&(0===n.length||i.node(n[0]))};i.string=function(n){return"string"==typeof n||n instanceof String};i.fn=function(n){var t=Object.prototype.toString.call(n);return"[object Function]"===t}},{}],4:[function(n,t){function r(n,t,r){if(!n&&!t&&!r)throw new Error("Missing required arguments");if(!i.string(t))throw new TypeError("Second argument must be a String");if(!i.fn(r))throw new TypeError("Third argument must be a Function");if(i.node(n))return u(n,t,r);if(i.nodeList(n))return f(n,t,r);if(i.string(n))return e(n,t,r);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList");}function u(n,t,i){return n.addEventListener(t,i),{destroy:function(){n.removeEventListener(t,i)}}}function f(n,t,i){return Array.prototype.forEach.call(n,function(n){n.addEventListener(t,i)}),{destroy:function(){Array.prototype.forEach.call(n,function(n){n.removeEventListener(t,i)})}}}function e(n,t,i){return o(document.body,n,t,i)}var i=n("./is"),o=n("delegate");t.exports=r},{"./is":3,delegate:2}],5:[function(n,t){function i(n){var t,r,i,u;return"SELECT"===n.nodeName?(n.focus(),t=n.value):"INPUT"===n.nodeName||"TEXTAREA"===n.nodeName?(r=n.hasAttribute("readonly"),r||n.setAttribute("readonly",""),n.select(),n.setSelectionRange(0,n.value.length),r||n.removeAttribute("readonly"),t=n.value):(n.hasAttribute("contenteditable")&&n.focus(),i=window.getSelection(),u=document.createRange(),u.selectNodeContents(n),i.removeAllRanges(),i.addRange(u),t=i.toString()),t}t.exports=i},{}],6:[function(n,t){function i(){}i.prototype={on:function(n,t,i){var r=this.e||(this.e={});return(r[n]||(r[n]=[])).push({fn:t,ctx:i}),this},once:function(n,t,i){function r(){u.off(n,r);t.apply(i,arguments)}var u=this;return r._=t,this.on(n,r,i)},emit:function(n){var r=[].slice.call(arguments,1),i=((this.e||(this.e={}))[n]||[]).slice(),t=0,u=i.length;for(t;t<u;t++)i[t].fn.apply(i[t].ctx,r);return this},off:function(n,t){var u=this.e||(this.e={}),r=u[n],f=[],i,e;if(r&&t)for(i=0,e=r.length;i<e;i++)r[i].fn!==t&&r[i].fn._!==t&&f.push(r[i]);return f.length?u[n]=f:delete u[n],this}};t.exports=i},{}],7:[function(t,i,r){!function(u,f){if("function"==typeof n&&n.amd)n(["module","select"],f);else if("undefined"!=typeof r)f(i,t("select"));else{var e={exports:{}};f(e,u.select);u.clipboardAction=e.exports}}(this,function(n,t){"use strict";function r(n){return n&&n.__esModule?n:{"default":n}}function u(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var i=r(t),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),o=function(){function n(t){u(this,n);this.resolveOptions(t);this.initSelection()}return e(n,[{key:"resolveOptions",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=n.action;this.emitter=n.emitter;this.target=n.target;this.text=n.text;this.trigger=n.trigger;this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,r="rtl"==document.documentElement.getAttribute("dir"),n;this.removeFake();this.fakeHandlerCallback=function(){return t.removeFake()};this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0;this.fakeElem=document.createElement("textarea");this.fakeElem.style.fontSize="12pt";this.fakeElem.style.border="0";this.fakeElem.style.padding="0";this.fakeElem.style.margin="0";this.fakeElem.style.position="absolute";this.fakeElem.style[r?"right":"left"]="-9999px";n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px";this.fakeElem.setAttribute("readonly","");this.fakeElem.value=this.text;document.body.appendChild(this.fakeElem);this.selectedText=i.default(this.fakeElem);this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null);this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=i.default(this.target);this.copyText()}},{key:"copyText",value:function(){var n=void 0;try{n=document.execCommand(this.action)}catch(t){n=!1}this.handleResult(n)}},{key:"handleResult",value:function(n){this.emitter.emit(n?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.target&&this.target.blur();window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=n,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"');},get:function(){return this._action}},{key:"target",set:function(n){if(void 0!==n){if(!n||"object"!==("undefined"==typeof n?"undefined":f(n))||1!==n.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&n.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(n.hasAttribute("readonly")||n.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=n}},get:function(){return this._target}}]),n}();n.exports=o})},{select:5}],8:[function(t,i,r){!function(u,f){if("function"==typeof n&&n.amd)n(["module","./clipboard-action","tiny-emitter","good-listener"],f);else if("undefined"!=typeof r)f(i,t("./clipboard-action"),t("tiny-emitter"),t("good-listener"));else{var e={exports:{}};f(e,u.clipboardAction,u.tinyEmitter,u.goodListener);u.clipboard=e.exports}}(this,function(n,t,i,r){"use strict";function u(n){return n&&n.__esModule?n:{"default":n}}function e(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function o(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function s(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}function f(n,t){var i="data-clipboard-"+n;if(t.hasAttribute(i))return t.getAttribute(i)}var h=u(t),c=u(i),l=u(r),a=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),v=function(n){function t(n,i){e(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.resolveOptions(i),r.listenClick(n),r}return s(t,n),a(t,[{key:"resolveOptions",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof n.action?n.action:this.defaultAction;this.target="function"==typeof n.target?n.target:this.defaultTarget;this.text="function"==typeof n.text?n.text:this.defaultText}},{key:"listenClick",value:function(n){var t=this;this.listener=l.default(n,"click",function(n){return t.onClick(n)})}},{key:"onClick",value:function(n){var t=n.delegateTarget||n.currentTarget;this.clipboardAction&&(this.clipboardAction=null);this.clipboardAction=new h.default({action:this.action(t),target:this.target(t),text:this.text(t),trigger:t,emitter:this})}},{key:"defaultAction",value:function(n){return f("action",n)}},{key:"defaultTarget",value:function(n){var t=f("target",n);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(n){return f("text",n)}},{key:"destroy",value:function(){this.listener.destroy();this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],i="string"==typeof n?[n]:n,t=!!document.queryCommandSupported;return i.forEach(function(n){t=t&&!!document.queryCommandSupported(n)}),t}}]),t}(c.default);n.exports=v})},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)});$(document).ready(function(){enableTooltips()});$(document).ajaxComplete(function(){enableTooltips()});swipeOptionsDocument={preventDefaultEvents:!1,triggerOnTouchLeave:!0,triggerOnTouchEnd:!1,swipeStatus:swipeStatusDocument,allowPageScroll:"vertical",maxTimeThreshold:500,threshold:100};showSubMenu=function(){$("#divActionsSubMenu").is(":visible")&&$("#divActionsSubMenu").hide()};$(window).on("orientationchange",function(){if($(window).width()<450&&isPortrait()){$(".mainPanel").css("top","0");$("#divActionsSubMenu").on("clickoutside",showSubMenu);$(".actions-item").length>2&&($("#divActionsSubMenu").addClass("sub-menu-active"),$("#btnActionsSubMenu").show())}else $(".mainPanel").css("top","auto"),$("#divActionsSubMenu").off("clickoutside",showSubMenu),$("#divActionsSubMenu").removeClass("sub-menu-active"),$("#btnActionsSubMenu").hide()});$(document).ready(function(){onButtonClose();onButtonSave();onButtonPrint();onButtonSend();onButtonSendOK();onDocumentNavClick();onButtonTop();onDeepLink();onButtonBasket();onButtonActions();onButtonRemoveBasket();onPdfThumb();onAPDClick();onEntityClick()})